{% extends "base.html" %}

{% block title %}Manage Playlists{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h1>Manage Playlist Privacy</h1>
</div>

{% if playlists %}
<div class="list-group">
    {% for playlist in playlists %}
    <div class="list-group-item list-group-item-action flex-column align-items-start">
        <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1">{{ playlist.snippet.title }}</h5>
            <small>{{ playlist.contentDetails.itemCount }} videos</small>
        </div>
        <p class="mb-1">{{ playlist.snippet.description[:150] }}{% if playlist.snippet.description|length > 150 %}...{% endif %}</p>
        
        <form action="{{ url_for('update_playlist_privacy') }}" method="post" class="mt-2">
            <input type="hidden" name="playlist_id" value="{{ playlist.id }}">
            <div class="btn-group" role="group">
                <button type="submit" name="privacy_status" value="public" class="btn btn-success">
                    <i class="fas fa-globe-americas"></i> Make Public
                </button>
                <button type="submit" name="privacy_status" value="private" class="btn btn-secondary">
                    <i class="fas fa-lock"></i> Make Private
                </button>
            </div>
        </form>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="alert alert-info" role="alert">
    No playlists found in your YouTube account.
</div>
{% endif %}

{% endblock %}